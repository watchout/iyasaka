---
name: deliberation
description: |
  多専門家による合議制意思決定プロトコル。
  「合議して」「専門家会議を開いて」「deliberate」でフル合議プロセスを実行。
  「〇〇について議論して」で特定トピックの合議を実行。
---

# Deliberation Protocol - 合議制意思決定システム

## 概要

複数の専門家AIが議論し、合意形成を経て意思決定を行うシステム。
各フェーズに特化した専門家が、それぞれの視点から検討・議論し、
最終的にコンセンサスを得てから次のステップに進む。

## 合議プロセス

```
┌─────────────────────────────────────────────────────────────┐
│  Phase 1: 問題提起                                           │
│  ─────────────────────────────────────────────────────────  │
│  ・議題の明確化                                              │
│  ・関連する専門家の選定                                       │
│  ・議論のスコープ設定                                        │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│  Phase 2: 個別見解の表明                                      │
│  ─────────────────────────────────────────────────────────  │
│  ・各専門家が独立して見解を述べる                              │
│  ・根拠と懸念点を明示                                        │
│  ・代替案があれば提示                                        │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│  Phase 3: 討議                                               │
│  ─────────────────────────────────────────────────────────  │
│  ・見解の相違点を整理                                        │
│  ・各専門家が他の見解に対してコメント                          │
│  ・妥協点・統合案の模索                                       │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│  Phase 4: 合意形成                                           │
│  ─────────────────────────────────────────────────────────  │
│  ・最終案の確定                                              │
│  ・残存リスクの明示                                          │
│  ・反対意見の記録（少数意見の尊重）                            │
└─────────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────────┐
│  Phase 5: 決定記録                                           │
│  ─────────────────────────────────────────────────────────  │
│  ・ADR（Architecture Decision Record）として記録              │
│  ・決定理由、却下された代替案、参加者を明記                     │
└─────────────────────────────────────────────────────────────┘
```

## 専門家の役割

| 専門家 | 役割 | 主な観点 |
|--------|------|----------|
| **Product Expert** | プロダクト設計 | ユーザー価値、UX、機能優先度 |
| **Technical Expert** | 技術設計 | アーキテクチャ、実装可能性、技術的負債 |
| **Business Expert** | 事業設計 | ROI、市場性、競合優位性 |
| **Quality Expert** | 品質保証 | テスト、セキュリティ、パフォーマンス |
| **User Advocate** | ユーザー代弁者 | ペルソナ視点、アクセシビリティ |

## 合議の種類

### 1. 軽量合議（Quick Deliberation）

2-3名の専門家による簡易議論。DETAIL層の決定に使用。

```
議題: [具体的な議題]
参加者: [専門家リスト]
時間: 5分以内

[各専門家の見解]
[結論]
```

### 2. 標準合議（Standard Deliberation）

3-4名の専門家による標準議論。CONTRACT層の決定に使用。

```
議題: [具体的な議題]
参加者: [専門家リスト]
時間: 15分程度

Phase 1: 問題提起
[内容]

Phase 2: 個別見解
[各専門家の見解]

Phase 3: 討議
[議論内容]

Phase 4: 合意形成
[最終決定と理由]

Phase 5: 決定記録
[ADR形式で記録]
```

### 3. 重量合議（Full Deliberation）

全専門家による完全議論。CORE層の決定に使用。

```
議題: [具体的な議題]
参加者: 全専門家
時間: 30分以上

[全フェーズを詳細に実施]
[反対意見も含めて記録]
[Decision Backlogへの登録]
```

## 合議トリガー

以下の状況で自動的に合議を開始する：

1. **CORE層の変更提案**
   - 必ず重量合議を実施
   - 全専門家の合意が必要

2. **CONTRACT層の新規定義**
   - 標準合議を実施
   - 関連する専門家3名以上の合意が必要

3. **複数のSSOTに影響する変更**
   - 標準合議を実施
   - 影響範囲の専門家全員が参加

4. **技術的負債の発生可能性**
   - 軽量合議を実施
   - Technical ExpertとQuality Expertが必須参加

5. **セキュリティに関わる決定**
   - 標準合議を実施
   - Quality Expertが必須参加

## 実行コマンド

```bash
# フル合議プロセスの実行
「合議して：[議題]」
「deliberate: [topic]」

# 特定の専門家を指定
「ProductとTechnicalで議論して：[議題]」

# 合議レベルの指定
「軽量合議：[議題]」
「標準合議：[議題]」
「重量合議：[議題]」
```

## 出力形式

合議結果は以下の形式で出力される：

```markdown
## 合議結果

### 議題
[議題内容]

### 参加専門家
- [専門家1]: [役割]
- [専門家2]: [役割]
...

### 議論サマリー
[主な論点と議論の流れ]

### 決定事項
[最終決定内容]

### 決定理由
[なぜこの決定に至ったか]

### 却下された代替案
[検討したが採用しなかった案とその理由]

### 残存リスク
[この決定に伴うリスク]

### 少数意見（あれば）
[反対意見や懸念事項]

### 次のアクション
- [ ] [アクション1]
- [ ] [アクション2]
```

## 関連スキル

- `.claude/skills/discovery/SKILL.md` - Discovery Phase専門家
- `.claude/skills/business/SKILL.md` - Business Phase専門家
- `.claude/skills/product/SKILL.md` - Product Phase専門家
- `.claude/skills/technical/SKILL.md` - Technical Phase専門家
- `.claude/skills/review-council/SKILL.md` - レビュー評議会
