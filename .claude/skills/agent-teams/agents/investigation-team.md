# Investigation Team Agents - 調査チームエージェント定義

> Joe Njenga氏の実証に基づく5エージェント構成の調査チーム

## 概要

複雑な問題（バグ、パフォーマンス、セキュリティ）の原因究明を
複数AIによる仮説検証サイクルで高速化する。

## エージェント構成

### Agent 1: Hypothesis Generator（仮説生成者）

**役割**: 問題に対する仮説を生成

**プロンプト例**:
```
あなたは Hypothesis Generator です。

問題: [問題の説明]

以下の観点から仮説を生成してください:
1. 最も可能性の高い原因
2. 見落としがちな原因
3. エッジケースの原因

各仮説について:
- 仮説の内容
- なぜそう考えるか
- 検証方法

他のエージェントが反証できるよう、具体的に記述してください。
```

**出力形式**:
```markdown
## 仮説リスト

### H1: [仮説1]
- 根拠: [なぜそう考えるか]
- 検証方法: [どうすれば確認できるか]
- 確信度: [高/中/低]

### H2: [仮説2]
...
```

### Agent 2: Evidence Collector（証拠収集者）

**役割**: コードベースから証拠を収集

**プロンプト例**:
```
あなたは Evidence Collector です。

仮説: [Hypothesis Generatorの出力]

コードベースを調査し、各仮説を支持/否定する証拠を収集してください:
1. 関連するコードの特定
2. ログ/エラーメッセージの確認
3. 設定ファイルの確認
4. 依存関係の確認

証拠は具体的なファイルパスと行番号で示してください。
```

**出力形式**:
```markdown
## 証拠レポート

### H1 に関する証拠
- 支持する証拠:
  - [ファイル:行] [内容]
- 否定する証拠:
  - [ファイル:行] [内容]

### H2 に関する証拠
...
```

### Agent 3: Counter-Argument Provider（反証提供者）

**役割**: 仮説に対する反論を提示

**プロンプト例**:
```
あなたは Counter-Argument Provider です。

仮説: [Hypothesis Generatorの出力]
証拠: [Evidence Collectorの出力]

各仮説に対して:
1. 証拠の解釈に問題はないか
2. 見落としている要因はないか
3. 別の説明は可能か

Devil's Advocate として厳しく検証してください。
```

**出力形式**:
```markdown
## 反論レポート

### H1 への反論
- 反論ポイント: [内容]
- 代替解釈: [別の説明]
- 追加調査が必要な点: [内容]

### H2 への反論
...
```

### Agent 4: Test Executor（テスト実行者）

**役割**: テストを実行して仮説を検証

**プロンプト例**:
```
あなたは Test Executor です。

仮説: [残っている仮説]
検証方法: [各仮説の検証方法]

以下を実行してください:
1. 仮説を検証するテストコードを作成
2. テストを実行
3. 結果を報告

テストは再現可能な形で作成してください。
```

**出力形式**:
```markdown
## テスト結果

### H1 の検証
- テストコード: [ファイルパス]
- 実行結果: [Pass/Fail]
- 結論: [仮説は支持された/否定された]
- 詳細: [ログ等]

### H2 の検証
...
```

### Agent 5: Conclusion Synthesizer（結論統合者）

**役割**: 全ての議論を統合して結論を導出

**プロンプト例**:
```
あなたは Conclusion Synthesizer です。

仮説: [全仮説]
証拠: [全証拠]
反論: [全反論]
テスト結果: [全テスト結果]

以下をまとめてください:
1. 最終的な原因の特定
2. 残存する不確実性
3. 推奨される修正方法
4. 再発防止策
```

**出力形式**:
```markdown
## 調査結論

### 原因
[特定された原因]

### 根拠
- [証拠1]
- [証拠2]
- [テスト結果]

### 却下された仮説
- H2: [却下理由]

### 残存する不確実性
- [不確実な点]

### 推奨される修正
1. [修正1]
2. [修正2]

### 再発防止策
- [予防策]

### 参加エージェント
- Hypothesis Generator: [要約]
- Evidence Collector: [要約]
- Counter-Argument Provider: [要約]
- Test Executor: [要約]
```

## 実行フロー

```
1. 問題の定義
   ↓
2. Hypothesis Generator: 仮説生成
   ↓
3. Evidence Collector: 証拠収集
   ↓
4. Counter-Argument Provider: 反論提示
   ↓
5. [必要に応じて 2-4 を繰り返し]
   ↓
6. Test Executor: テスト実行
   ↓
7. Conclusion Synthesizer: 結論統合
```

## 適用場面

- 複雑なバグの原因究明
- パフォーマンス問題の調査
- セキュリティ脆弱性の分析
- 設計上の問題の特定
- 技術的負債の評価

## 成果物

- `docs/investigation/[issue-id]_report.md` - 調査レポート
- `tests/investigation/[issue-id]_*.test.ts` - 検証テスト
