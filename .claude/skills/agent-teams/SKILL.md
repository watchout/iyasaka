---
name: agent-teams
description: |
  Agent Teams運用パターン集。複数AIエージェントの協調開発パターン。
  「チーム編成して」「agent-teams」で実行。
  実証済みパターン: 「分析チーム」「開発チーム」「調査チーム」
---

# Agent Teams Skill - 複数エージェント協調パターン

## 概要

複数のAIエージェントを並行稼働させ、協調して作業を行うパターン集。
国内外の実証事例に基づき、効果的なチーム編成と運用方法を定義。

## 実証済みパターン

### Pattern 1: 分析チーム（Analysis Team）

**事例**: クラスメソッド清水氏のサイト分析

```
┌─────────────────────────────────────────────────────┐
│              Analysis Team (3 Agents)               │
├─────────────────────────────────────────────────────┤
│  Agent 1: SEO Analyst                               │
│  → 検索エンジン最適化の観点から分析                    │
│                                                     │
│  Agent 2: UI/UX Evaluator                           │
│  → デザイン・ユーザビリティの観点から評価               │
│                                                     │
│  Agent 3: Security Auditor                          │
│  → セキュリティの観点から診断                         │
└─────────────────────────────────────────────────────┘
           │ 並行実行 │
           └────┬────┘
                ▼
┌─────────────────────────────────────────────────────┐
│           Report Integrator                         │
│  → 各分析結果を統合してHTMLレポート生成               │
└─────────────────────────────────────────────────────┘
```

**成果物**: 統合分析レポート（HTML/Markdown）

**適用場面**:
- 既存サイト/アプリの総合診断
- リファクタリング前の現状分析
- 品質評価レポート作成

### Pattern 2: 開発チーム（Development Team）

**事例**: Cole Medin氏のSDKアプリ開発

```
┌─────────────────────────────────────────────────────┐
│             Development Team (3 Agents)             │
├─────────────────────────────────────────────────────┤
│  Agent 1: Frontend Developer                        │
│  → React/Vue等のUI実装                              │
│                                                     │
│  Agent 2: Backend Developer                         │
│  → API/サーバーサイド実装                            │
│                                                     │
│  Agent 3: Database Engineer                         │
│  → スキーマ設計・マイグレーション                     │
└─────────────────────────────────────────────────────┘
           │
           ▼
┌─────────────────────────────────────────────────────┐
│        Interface Contract Negotiation               │
│  → リアルタイムでAPI契約を交渉・合意                  │
│  → 不整合を検出したら即座に調整                       │
└─────────────────────────────────────────────────────┘
```

**所要時間**: 約6分（シンプルなアプリの場合）

**重要ポイント**:
- **インターフェース契約の明示化**が必須
- 各エージェントが他のエージェントの出力を参照可能にする
- 不整合発生時の調整プロトコルを事前定義

**課題（和田氏の事例より）**:
- インターフェース不整合が人間チームと同様に発生
- 事前のAPI契約定義で軽減可能

### Pattern 3: 調査チーム（Investigation Team）

**事例**: Joe Njenga氏のバグ調査

```
┌─────────────────────────────────────────────────────┐
│            Investigation Team (5 Agents)            │
├─────────────────────────────────────────────────────┤
│  Agent 1: Hypothesis Generator                      │
│  → 仮説を立てる                                      │
│                                                     │
│  Agent 2: Evidence Collector                        │
│  → コードベースから証拠を収集                         │
│                                                     │
│  Agent 3: Counter-Argument Provider                 │
│  → 反証を提示                                        │
│                                                     │
│  Agent 4: Test Executor                             │
│  → テストを実行して仮説を検証                         │
│                                                     │
│  Agent 5: Conclusion Synthesizer                    │
│  → 議論を統合して結論を導出                           │
└─────────────────────────────────────────────────────┘
           │
           ▼
┌─────────────────────────────────────────────────────┐
│           Hypothesis → Evidence → Conclusion        │
│  仮説検証サイクルを複数AIで高速化                      │
└─────────────────────────────────────────────────────┘
```

**適用場面**:
- 複雑なバグの原因究明
- パフォーマンス問題の調査
- セキュリティ脆弱性の分析

### Pattern 4: 企画チーム（Planning Team）

**事例**: 森本洋平氏の企画書作成

```
┌─────────────────────────────────────────────────────┐
│              Planning Team (3 Agents)               │
├─────────────────────────────────────────────────────┤
│  Agent 1: Market Researcher                         │
│  → 市場調査・競合分析                                │
│                                                     │
│  Agent 2: Product Strategist                        │
│  → プロダクト戦略・機能定義                          │
│                                                     │
│  Agent 3: Technical Feasibility Analyst             │
│  → 技術的実現可能性評価                              │
└─────────────────────────────────────────────────────┘
           │ 並行リサーチ + 進捗共有 │
           └──────────┬─────────────┘
                      ▼
┌─────────────────────────────────────────────────────┐
│              docs/product-plan.md                   │
│  → 仮定事項を明記した企画書ドラフト                   │
└─────────────────────────────────────────────────────┘
```

**成果物**: 企画書ドラフト（仮定事項明記）

### Pattern 5: 大規模開発チーム（Large-Scale Team）

**事例**: Nicholas Carlini氏のCコンパイラ開発

```
規模:
- エージェント数: 16体
- セッション数: 約2,000回
- コスト: 約$20,000
- 成果物: 約10万行のCコンパイラ（Linuxカーネルビルド可能）
```

**適用場面**:
- 大規模な新規開発
- 複雑なシステムの自動生成
- 研究・実験的プロジェクト

**注意点**:
- コストが大きい
- 調整の複雑さが増す
- 明確なアーキテクチャ定義が必須

## チーム編成のベストプラクティス

### 1. インターフェース契約の事前定義

```markdown
## Interface Contract

### API Endpoints (Backend ↔ Frontend)
- POST /api/users → CreateUserRequest, CreateUserResponse
- GET /api/users/:id → UserResponse

### Database Schema (DB ↔ Backend)
- users table: id, email, name, created_at

### Event Bus (全エージェント共有)
- user.created → { userId, email }
```

### 2. 進捗共有メカニズム

```markdown
## Progress Sharing

各エージェントは以下のファイルに進捗を書き込む:
- .agent-status/agent-1.md
- .agent-status/agent-2.md
- .agent-status/agent-3.md

定期的に他エージェントの状態を確認し、
依存関係がある場合は待機または調整。
```

### 3. 不整合検出と調整

```markdown
## Conflict Resolution

不整合検出時:
1. 両エージェントの出力を比較
2. インターフェース契約と照合
3. 調整が必要な場合は合議を開始
4. 合意内容を契約に反映
```

### 4. 成果物統合

```markdown
## Output Integration

分析系: HTMLレポートに統合
開発系: 統合テストで検証
調査系: 結論ドキュメントに統合
```

## 実行方法

### チーム編成

```
「分析チームを編成して：[対象]」
「開発チームを編成して：[機能]」
「調査チームを編成して：[問題]」
「企画チームを編成して：[テーマ]」
```

### カスタムチーム

```
「3人チームを編成：
  - Agent 1: [役割1]
  - Agent 2: [役割2]
  - Agent 3: [役割3]
  タスク: [タスク内容]」
```

## 環境設定

Agent Teams機能を有効化:

```bash
export CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1
```

## 関連スキル

- `.claude/skills/deliberation/SKILL.md` - 合議制意思決定
- `.claude/skills/implementation/SKILL.md` - 実装フェーズ
- `.claude/skills/review-council/SKILL.md` - レビュー評議会

## 参考事例

| 実施者 | パターン | 規模 | 成果 |
|--------|----------|------|------|
| 清水（クラスメソッド） | 分析チーム | 3体 | 統合分析レポート |
| Cole Medin | 開発チーム | 3体 | 6分でアプリ完成 |
| 和田健太郎 | 開発チーム | 5体 | Chrome拡張機能 |
| 森本洋平 | 企画チーム | 3体 | 企画書ドラフト |
| Joe Njenga | 調査チーム | 5体 | バグ原因究明 |
| Nicholas Carlini | 大規模 | 16体 | 10万行Cコンパイラ |
