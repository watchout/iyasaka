---
name: review-council
description: |
  レビュー評議会。品質保証の最終ゲート。
  「レビュー評議会を開催」「review-council」で実行。
  個別レビュー: 「R1」「R2」「R3」で個別実行可能。
---

# Review Council Skill - レビュー評議会

## 概要

実装完了後の最終品質ゲートとして機能する評議会。
複数の専門家がそれぞれの観点からレビューし、
リリース可否を判定する。

## 評議会構成

```
Review Council Structure
─────────────────────────────────────────────────────

┌─────────────────────────────────────────────────────┐
│                Review Council                       │
├─────────────────────────────────────────────────────┤
│  R1: SSOT Compliance Auditor                        │
│      → SSOT準拠性を監査                              │
│                                                     │
│  R2: Quality Gate Keeper                            │
│      → 品質基準を検証                                │
│                                                     │
│  R3: Security Guardian                              │
│      → セキュリティを監査                            │
│                                                     │
│  R4: User Experience Advocate                       │
│      → UXを検証                                      │
│                                                     │
│  R5: Performance Analyst                            │
│      → パフォーマンスを検証                          │
└─────────────────────────────────────────────────────┘
           │
           ▼
     合議による最終判定
           │
           ▼
    ✅ Approve → リリース可
    ❌ Reject → 修正後再レビュー
```

## 各レビュアーの役割

### R1: SSOT Compliance Auditor（SSOT準拠監査者）

**役割**: 実装がSSOTに準拠しているか監査

**チェック項目**:
- [ ] SSOT-0_PRD.md の MUST 要件が全て実装されている
- [ ] 機能SSOTの仕様通りに実装されている
- [ ] SSOTに定義されていない機能が追加されていない
- [ ] カスタマイズログの変更が反映されている
- [ ] 追跡マトリクス（Traceability Matrix）が更新されている

詳細: `agents/r1-ssot-auditor.md`

### R2: Quality Gate Keeper（品質ゲートキーパー）

**役割**: 品質基準を満たしているか検証

**チェック項目**:
- [ ] TypeScript エラー 0件
- [ ] ESLint エラー 0件（Warning は許容）
- [ ] Prettier 差分 0件
- [ ] 単体テスト 全パス（失敗0件、スキップ0件）
- [ ] 統合テスト 全パス
- [ ] カバレッジ 80%以上（新規コードは90%以上）
- [ ] ビルド成功

詳細: `agents/r2-quality-keeper.md`

### R3: Security Guardian（セキュリティガーディアン）

**役割**: セキュリティリスクがないか監査

**チェック項目**:
- [ ] OWASP Top 10 対策済み
- [ ] 認証・認可が適切に実装されている
- [ ] 入力バリデーションが適切
- [ ] シークレットがハードコードされていない
- [ ] 依存関係に Critical/High 脆弱性がない
- [ ] SQLインジェクション、XSS、CSRF 対策済み

詳細: `agents/r3-security-guardian.md`

### R4: User Experience Advocate（UXアドボケイト）

**役割**: ユーザー体験の観点から検証

**チェック項目**:
- [ ] ユーザーフローが自然
- [ ] エラーメッセージがユーザーフレンドリー
- [ ] ローディング状態が適切に表示される
- [ ] アクセシビリティ基準を満たしている
- [ ] モバイル対応が適切
- [ ] パフォーマンスがユーザー体験を損なわない

詳細: `agents/r4-ux-advocate.md`

### R5: Performance Analyst（パフォーマンスアナリスト）

**役割**: パフォーマンス基準を満たしているか検証

**チェック項目**:
- [ ] API レスポンスタイム基準以内
- [ ] ページロード時間基準以内
- [ ] バンドルサイズ上限以内
- [ ] Lighthouse スコア基準以上（LP/HP の場合）
- [ ] メモリリークがない
- [ ] N+1 クエリがない

詳細: `agents/r5-performance-analyst.md`

## 実行方法

### フル評議会

```
「レビュー評議会を開催して」
「review-council」
```

全レビュアーが順次レビューし、最終判定を行う。

### 個別レビュー

```
「R1を実行」→ SSOT Compliance Auditorのみ
「R2を実行」→ Quality Gate Keeperのみ
「R3を実行」→ Security Guardianのみ
「R4を実行」→ User Experience Advocateのみ
「R5を実行」→ Performance Analystのみ
```

### 特定機能のレビュー

```
「AUTH-001をレビュー」→ 特定機能に対してフルレビュー
```

## 評議会プロセス

```
1. レビュー依頼
   ↓
2. 各レビュアーが独立してレビュー
   ↓
3. レビュー結果を集約
   ↓
4. 問題点があれば合議
   ↓
5. 最終判定
   │
   ├─ 全員 Approve → ✅ リリース可
   │
   ├─ 1名以上 Request Changes → ❌ 修正後再レビュー
   │   （修正事項を明記）
   │
   └─ 重大な問題発見 → ⛔ ブロック
       （合議で解決策を検討）
```

## 最終判定基準

### Approve 条件

```
必須（全て ✅ が必要）:
✅ R1: SSOT準拠 100%
✅ R2: 品質ゲート全通過
✅ R3: Critical/High セキュリティ問題なし

推奨（状況により許容）:
⚠️ R4: UX改善提案あり（軽微）
⚠️ R5: パフォーマンス改善余地あり（基準内）
```

### Reject 条件

```
1つでも該当したら Reject:
❌ SSOT未実装の MUST 要件がある
❌ テストが失敗している
❌ カバレッジ 80% 未満
❌ Critical/High セキュリティ脆弱性がある
❌ ビルドが失敗している
```

## レビュー結果形式

```markdown
## Review Council 結果

### 対象
- 機能: [機能ID/名称]
- PR: [PR番号]
- コミット: [SHA]

### 各レビュアー判定

| レビュアー | 判定 | コメント |
|-----------|------|----------|
| R1: SSOT Compliance | ✅ Approve | - |
| R2: Quality Gate | ✅ Approve | カバレッジ 85% |
| R3: Security | ✅ Approve | - |
| R4: UX | ⚠️ Approve with comments | エラー文言の改善を推奨 |
| R5: Performance | ✅ Approve | - |

### 最終判定

**✅ Approved for Release**

### 改善推奨事項（次回対応可）
- [ ] エラー文言の改善（R4）

### 次のアクション
- [ ] main ブランチにマージ
- [ ] ステージング環境にデプロイ
- [ ] スモークテスト実施
```

## 3層品質保証

```
┌─────────────────────────────────────────────────────┐
│  Layer 3: Review Council（本スキル）                 │
│  → リリース前の最終ゲート                            │
│  → 複数専門家による合議制レビュー                     │
├─────────────────────────────────────────────────────┤
│  Layer 2: Implementation Phase                      │
│  → 実装中のコード監査（I3）                          │
│  → テスト作成・実行（I2, I4）                        │
├─────────────────────────────────────────────────────┤
│  Layer 1: CI/CD Pipeline                            │
│  → 自動化された品質チェック                          │
│  → lint, typecheck, test, build                     │
└─────────────────────────────────────────────────────┘
```

## 関連ドキュメント

- 17_CODE_AUDIT.md: コード監査基準
- 19_CI_PR_STANDARDS.md: CI/PR合格基準
- 21_AI_ESCALATION.md: エスカレーション基準
